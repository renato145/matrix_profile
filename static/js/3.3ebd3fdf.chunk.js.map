{"version":3,"sources":["store.ts","reportWebVitals.ts","utils.ts","components/LoadSampleBtn.tsx","components/LinePlot.tsx","components/Brush.tsx","components/Plot.tsx","components/DataDescription.tsx","components/Spinner.tsx","components/CalculateBtn.tsx","App.tsx","setup.tsx","../../matrix-profile-wasm/pkg/matrix_profile_wasm_bg.js"],"names":["DataState","CalcState","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","clamp","x","min","max","sleep","delay","Promise","resolve","setTimeout","yValue","o","value","useStore","create","set","get","dataState","Empty","calcState","setData","data","loadSampleData","a","csv","row","SampleData","calculate","Loading","undefined","Float32Array","from","map","matrixProfile","NaiveMatrixProfile","profile","Array","get_profile","Finished","selector","LoadSampleBtn","className","onClick","disabled","LinePlot","y","margins","height","width","children","limits","title","innerWidth","left","right","useMemo","length","yShow","slice","domain","range","xScale","scaleLinear","xAxis","axisBottom","tickSize","tickSizeOuter","extent","bottom","top","yScale","nice","yAxis","axisLeft","ticks","path","line","i","xAxisRef","useCallback","node","select","call","yAxisRef","transition","transform","ref","fill","d","Brush","setLimits","brushEnd","selection","type","invert","brush","brushX","on","refTS","useRef","refMP","useEffect","current","brushMargins","plotLimits","brushLimits","Plot","useMeasure","polyfill","ResizeObserver","useState","plotData","dataHeight","brushHeight","style","minWidth","props","DataDescription","href","target","rel","sizes","Spinner","size","sz","sizeCls","viewBox","cx","cy","r","stroke","strokeWidth","CalculateBtn","App","ReactDOM","render","StrictMode","document","getElementById","cachedTextDecoder","TextDecoder","module","require","ignoreBOM","fatal","decode","cachegetUint8Memory0","getStringFromWasm0","ptr","len","buffer","wasm","Uint8Array","subarray","cachegetFloat32Memory0","getFloat32Memory0","WASM_VECTOR_LEN","passArrayF32ToWasm0","arg","malloc","cachegetInt32Memory0","getInt32Memory0","Int32Array","cachegetUint32Memory0","getArrayU32FromWasm0","Uint32Array","this","__destroy_into_raw","retptr","r0","r1","v0","obj","Object","prototype","m","ptr0","len0","ret","__wrap","__wbindgen_throw","arg0","arg1","Error"],"mappings":"yIAKYA,EAMAC,E,kCCGGC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,kDCTDQ,EAAQ,SAACC,EAAWC,EAAaC,GAC5C,OAAOF,EAAIC,EAAMA,EAAMD,EAAIE,EAAMA,EAAMF,GAG5BG,EAAQ,SAACC,GAAD,OAAmB,IAAIC,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAASF,Q,SFCzEhB,O,iBAAAA,I,2BAAAA,I,4BAAAA,M,cAMAC,O,iBAAAA,I,qBAAAA,I,wBAAAA,M,KAUL,IAAMmB,EAAS,SAACC,GAAD,OAAiBA,EAAEC,OAa5BC,EAAWC,aAAe,SAACC,EAAKC,GAAN,MAAe,CACpDC,UAAW3B,EAAU4B,MACrBC,UAAW5B,EAAU2B,MACrBE,QAAS,SAACC,GAAD,OAAUN,EAAI,CAAEM,UACzBC,eAAe,WAAD,4BAAE,4BAAAC,EAAA,sEACKC,YAAI,mBAAmB,SAACC,GAAD,MAAe,CACvDb,OAAQa,EAAG,mBAFC,OACRJ,EADQ,OAIdN,EAAI,CAAEM,OAAMJ,UAAW3B,EAAUoC,aAJnB,2CAAF,kDAAC,GAMfC,UAAU,WAAD,4BAAE,kCAAAJ,EAAA,yDACTR,EAAI,CAAEI,UAAW5B,EAAUqC,eAEdC,KADPR,EAAOL,IAAMK,MAFV,iEAIHhB,EAAM,IAJH,OAKHH,EAAI4B,aAAaC,KAAKV,EAAKW,IAAItB,IAC/BuB,EAAgBC,IAAmBP,UAAUzB,EAAG,IAChDiC,EAAUC,MAAML,KAAKE,EAAcI,eACzCtB,EAAI,CAAEkB,gBAAeE,UAAShB,UAAW5B,EAAU+C,WAR1C,4CAAF,kDAAC,O,OGzCNC,EAAW,SAAC,GAAD,MAA4C,CAC3DjB,eADe,EAAGA,eAElBL,UAFe,EAAmBA,YAKvBuB,EAA0B,WAAO,IAAD,EACL3B,EAAS0B,GAAvCjB,EADmC,EACnCA,eAAgBL,EADmB,EACnBA,UAExB,OACE,wBACEwB,UAAU,MACVC,QAASpB,EACTqB,SAAU1B,IAAc3B,EAAUoC,WAHpC,0B,0CCCSkB,EAA4B,SAAC,GAQnC,IAPLC,EAOI,EAPJA,EACAC,EAMI,EANJA,QACAC,EAKI,EALJA,OACAC,EAII,EAJJA,MACAC,EAGI,EAHJA,SACAC,EAEI,EAFJA,OACAC,EACI,EADJA,MAGMC,EAAaJ,EAAQF,EAAQO,KAAOP,EAAQQ,MAF9C,EAIiBC,mBAAQ,WAC3B,OAAkB,OAAXL,EACH,CAAEhD,EAAG,CAAC,EAAG2C,EAAEW,QAASC,MAAOZ,GAC3B,CAAE3C,EAAG,CAACgD,EAAO,GAAIA,EAAO,IAAKO,MAAOZ,EAAEa,MAAMR,EAAO,GAAIA,EAAO,OACjE,CAACA,EAAQL,IAJJ3C,EAJJ,EAIIA,EAAGuD,EAJP,EAIOA,MAJP,EAUsBF,mBAAQ,WAChC,IAAMI,EAASzD,EACT0D,EAAQ,CAACd,EAAQO,KAAML,EAAQF,EAAQQ,OACvCO,EAASC,cAAcH,OAAOA,GAAQC,MAAMA,GAElD,MAAO,CAAEG,MADKC,YAAWH,GAAQI,SAAS,GAAGC,cAAc,GAC3CL,YACf,CAACf,EAAQO,KAAMP,EAAQQ,MAAON,EAAO9C,IANhC6D,EAVJ,EAUIA,MAAOF,EAVX,EAUWA,OAVX,EAkBsBN,mBAAQ,WAChC,IAAMI,EAASQ,YAAOtB,GAAGb,KAAI,SAACrB,GAAD,cAAgBA,QAAhB,IAAgBA,IAAK,KAC5CiD,EAAQ,CAACb,EAASD,EAAQsB,OAAQtB,EAAQuB,KAC1CC,EAASR,cAAcH,OAAOA,GAAQC,MAAMA,GAAOW,OAEzD,MAAO,CAAED,SAAQE,MADHC,YAASH,GAAQL,UAAUb,GAAYsB,MAAM,MAE1D,CAAC7B,EAAGE,EAAQD,EAASM,IANhBoB,EAlBJ,EAkBIA,MAAOF,EAlBX,EAkBWA,OAQTK,EAAOpB,mBAAQ,WACnB,YAAc1B,IAAV4B,EACKmB,cAAOnB,EAAMzB,KAAI,SAACrB,EAAGkE,GAAJ,MAAU,CAAChB,EAAOgB,EAAE3E,EAAE,IAAKoE,EAAO3D,QAErD,OACN,CAAC8C,EAAOI,EAAQS,EAAQpE,IAErB4E,EAAWC,uBACf,SAACC,GACCC,YAAOD,GAAME,KAAKnB,KAEpB,CAACA,IAGGoB,EAAWJ,uBACf,SAACC,GACCC,YAAOD,GAAMI,aAAaF,KAAKV,KAEjC,CAACA,IAGH,OACE,qBAAK/B,UAAU,0BAAf,SACE,sBAAKM,OAAQA,EAAQC,MAAOA,EAA5B,eACanB,IAAVsB,EACC,sBACEV,UAAU,wBACV4C,UAAS,oBAAevC,EAAQO,KAAO,EAA9B,aAAoCP,EAAQuB,IAAM,GAAlD,KAFX,SAIGlB,IAED,KACJ,mBACEmC,IAAKR,EACLO,UAAS,sBAAiBtC,EAASD,EAAQsB,OAAlC,OAEX,mBAAGkB,IAAKH,EAAUE,UAAS,oBAAevC,EAAQO,KAAvB,SACjB,OAATsB,EACC,sBACEY,KAAK,OACL9C,UAAU,wDACV+C,EAAGb,IAEH,KACH1B,QCvEIwC,EAAyB,SAAC,GAShC,IARL5C,EAQI,EARJA,EACAV,EAOI,EAPJA,QACAY,EAMI,EANJA,OACAC,EAKI,EALJA,MACAF,EAII,EAJJA,QACAe,EAGI,EAHJA,OAEA6B,GACI,EAFJxC,OAEI,EADJwC,WAEMC,EAAWZ,uBACf,YAA0B,IAAvBa,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KACM,OAAdD,EACFF,EAAU,MACQ,QAATG,GACTH,EAAUE,EAAU5D,IAAI6B,EAAOiC,WAGnC,CAACJ,EAAW7B,IAGRkC,EAAQxC,mBAAQ,WACpB,IAAMwC,EAAQC,cAAS7B,OAAO,CAC5B,CAACrB,EAAQO,KAAMP,EAAQuB,KACvB,CAACrB,EAAQF,EAAQQ,MAAOP,EAASD,EAAQsB,UAI3C,OAFA2B,EAAME,GAAG,QAASN,GAClBI,EAAME,GAAG,MAAON,GACTI,IACN,CAACjD,EAASE,EAAOD,EAAQ4C,IAEtBO,EAAQC,iBAAoB,MAC5BC,EAAQD,iBAAoB,MASlC,OAPAE,qBAAU,gBACMxE,IAAVkE,GAAyC,OAAlBG,EAAMI,UACjCrB,YAAOiB,EAAMI,SAASpB,KAAKa,GACL,OAAlBK,EAAME,SAAkBrB,YAAOmB,EAAME,SAASpB,KAAKa,MAEtD,CAACA,EAAOlC,EAAQhB,EAAEW,OAAQrB,IAG3B,gCACE,cAAC,EAAD,CACEU,EAAGA,EACHC,QAASA,EACTC,OAAQA,EACRC,MAAOA,EACPE,OAAQ,KALV,SAOE,mBAAGoC,IAAKY,WAEGrE,IAAZM,EACC,cAAC,EAAD,CACEU,EAAGV,EACHW,QAASA,EACTC,OAAQA,EACRC,MAAOA,EACPE,OAAQ,KALV,SAOE,mBAAGoC,IAAKc,MAER,SC1EJ7D,EAAW,SAAC,GAAD,MAAgC,CAAElB,KAAlC,EAAGA,KAAqCc,QAAxC,EAASA,UAEpBW,EAAU,CACdO,KAAM,GACNC,MAAO,GACPe,IAAK,GACLD,OAAQ,IAGJmC,EAAY,2BACbzD,GADa,IAEhBuB,IAAK,IAGDmC,EAA0B,IAA1BA,EAA0C,IAC1CC,EAA2B,GAA3BA,EAA0C,IAEnCC,EAAO,WAAO,IAAD,EACSC,YAAW,CAAEC,SAAUC,iBADhC,mBACjBvB,EADiB,YACVvC,EADU,EACVA,OAAQC,EADE,EACFA,MADE,EAEEnC,EAAS0B,GAA3BlB,EAFgB,EAEhBA,KAAMc,EAFU,EAEVA,QAFU,EAGI2E,mBAA0B,MAH9B,mBAGjB5D,EAHiB,KAGTwC,EAHS,KAKlBqB,EAAWxD,mBAAQ,yBAAMlC,QAAN,IAAMA,OAAN,EAAMA,EAAMW,IAAItB,KAAS,CAACW,IAE7CwC,EAASN,mBAAQ,WAAO,IAAD,EACrBI,EAAS,CAAC,EAAD,iBAAIoD,QAAJ,IAAIA,OAAJ,EAAIA,EAAUvD,cAAd,QAAwB,KACjCI,EAAQ,CAACd,EAAQO,KAAML,EAAQF,EAAQQ,OAE7C,OADeQ,cAAcH,OAAOA,GAAQC,MAAMA,KAEjD,CAACmD,EAAU/D,IAEVgE,OAAyBnF,IAAZM,EAAwBY,EAASA,EAAS,EAC3DiE,EAAa/G,EAAM+G,EAAYR,EAAsBA,GACrD,IAAMS,EAAchH,EAClB8C,EAASiE,EACTP,EACAA,GAGF,OACE,sBACEnB,IAAKA,EACL4B,MAAO,CAAEC,SAAU,SACnB1E,UAAU,4BAHZ,eAKgBZ,IAAbkF,EACC,cAAC,EAAD,CACElE,EAAGkE,EACHjE,QAASA,EACTC,OAAQiE,EACRhE,MAAOA,EACPE,OAAQA,EACRC,MAAM,qBAGR,qBAAKV,UAAU,mBAAf,SACE,6FAGSZ,IAAZM,EACC,qBAAKM,UAAU,OAAf,SACE,cAAC,EAAD,CACEI,EAAGV,EACHW,QAASA,EACTC,OAAQiE,EACRhE,MAAOA,EACPE,OAAQA,EACRC,MAAM,qBAGR,UACUtB,IAAbkF,EACC,qBAAKtE,UAAU,OAAf,SACE,cAAC,EAAD,CACEI,EAAGkE,EACH5E,QAASA,EACTW,QAASyD,EACTxD,OAAQkE,EACRjE,MAAOA,EACPa,OAAQA,EACRX,OAAQA,EACRwC,UAAWA,MAGb,UACU7D,IAAZM,QAAwCN,IAAbkF,EAC3B,qBAAKtE,UAAU,mBAAf,SACE,4FAEA,SC9FJF,EAAW,SAAC6E,GAAD,OAAmBA,EAAMnG,WAE7BoG,EAA4B,WAGvC,OAFkBxG,EAAS0B,KAENjD,EAAUoC,WAC7B,sBAAKe,UAAU,+BAAf,UACE,sCACQ,IACN,mBACE6E,KAAK,4DACLC,OAAO,SACPC,IAAI,WAHN,oCAQF,mBAAG/E,UAAU,aAAb,+TAQA,MC1BAgF,EAAQ,CACZ,GAAM,EAAG,GAAM,EAAG,GAAM,GAQbC,EAA2B,SAAC,GAA8B,IAA5BjF,EAA2B,EAA3BA,UAA2B,IAAhBkF,KAC9CC,EAAKH,OADyD,MAAX,KAAW,GAE9DI,EAAO,YAAQD,EAAR,cAAgBA,GAE7B,OACE,sBAAKnF,UAAS,uBAAkBoF,EAAlB,YAA6BpF,GAAa8C,KAAK,OAAOuC,QAAQ,YAA5E,UACE,wBACErF,UAAU,aACVsF,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPC,YAAY,MAEd,sBACE1F,UAAU,aACV8C,KAAK,eACLC,EAAE,wHCxBJjD,EAAW,SAAC,GAAD,MAAkD,CACjEtB,UADe,EAAGA,UAElBE,UAFe,EAAcA,UAG7BQ,UAHe,EAAyBA,YAM7ByG,EAAyB,WAAO,IAAD,EACEvH,EAAS0B,GAA7CtB,EADkC,EAClCA,UAAWE,EADuB,EACvBA,UAAWQ,EADY,EACZA,UAE9B,OACE,8BACE,wBACEc,UAAU,MACVC,QAAO,sBAAE,sBAAAnB,EAAA,sDAEPI,IAFO,2CAKTgB,SACE1B,IAAc3B,EAAU4B,OAASC,IAAc5B,EAAU2B,MAR7D,SAWE,sBAAKuB,UAAU,sBAAf,sBAEGtB,IAAc5B,EAAUqC,QACvB,cAAC,EAAD,CAASa,UAAU,SACjB,aCxBD4F,EAAM,WACjB,OACE,sBAAK5F,UAAU,0DAAf,UACE,mBAAGA,UAAU,qBAAb,4BACA,sBAAKA,UAAU,wCAAf,UAGE,cAAC,EAAD,IACA,cAAC,EAAD,OAEF,cAAC,EAAD,IACA,cAAC,EAAD,Q,OCXN6F,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BlJ,K,gJCZImJ,EAAoB,IAFoB,qBAAhBC,aAA8B,EAAIC,EAAOC,SAAS,QAAQF,YAAcA,aAE3D,QAAS,CAAEG,WAAW,EAAMC,OAAO,IAE5EL,EAAkBM,SAElB,IAAIC,EAAuB,KAQ3B,SAASC,EAAmBC,EAAKC,GAC7B,OAAOV,EAAkBM,QAPI,OAAzBC,GAAiCA,EAAqBI,SAAWC,IAAYD,SAC7EJ,EAAuB,IAAIM,WAAWD,IAAYD,SAE/CJ,GAI2CO,SAASL,EAAKA,EAAMC,IAG1E,IAAIK,EAAyB,KAC7B,SAASC,IAIL,OAH+B,OAA3BD,GAAmCA,EAAuBJ,SAAWC,IAAYD,SACjFI,EAAyB,IAAI5H,aAAayH,IAAYD,SAEnDI,EAGX,IAAIE,EAAkB,EAEtB,SAASC,EAAoBC,EAAKC,GAC9B,IAAMX,EAAMW,EAAoB,EAAbD,EAAItG,QAGvB,OAFAmG,IAAoB5I,IAAI+I,EAAKV,EAAM,GACnCQ,EAAkBE,EAAItG,OACf4F,EAGX,IAAIY,EAAuB,KAC3B,SAASC,IAIL,OAH6B,OAAzBD,GAAiCA,EAAqBV,SAAWC,IAAYD,SAC7EU,EAAuB,IAAIE,WAAWX,IAAYD,SAE/CU,EAOX,IAAIG,EAAwB,KAQ5B,SAASC,EAAqBhB,EAAKC,GAC/B,OAP8B,OAA1Bc,GAAkCA,EAAsBb,SAAWC,IAAYD,SAC/Ea,EAAwB,IAAIE,YAAYd,IAAYD,SAEjDa,GAImBV,SAASL,EAAM,EAAGA,EAAM,EAAIC,GAInD,IAAMnH,EAAb,kGASI,WACI,IAAMkH,EAAMkB,KAAKlB,IAGjB,OAFAkB,KAAKlB,IAAM,EAEJA,IAbf,kBAgBI,WACI,IAAMA,EAAMkB,KAAKC,qBACjBhB,IAAmCH,KAlB3C,yBAyDI,WACI,IACI,IAAMoB,EAASjB,KAAsC,IACrDA,IAAoCiB,EAAQF,KAAKlB,KACjD,IAAIqB,EAAKR,IAAkBO,EAAS,EAAI,GACpCE,EAAKT,IAAkBO,EAAS,EAAI,GACpCG,GAhFcvB,EAgFYqB,EAhFPpB,EAgFWqB,EA/EnCf,IAAoBF,SAASL,EAAM,EAAGA,EAAM,EAAIC,IA+ET3F,QAEtC,OADA6F,IAAqBkB,EAAS,EAALC,GAClBC,EAPX,QASIpB,IAAqC,IApFjD,IAA8BH,EAAKC,IAiBnC,8BAyEI,WACI,IACI,IAAMmB,EAASjB,KAAsC,IACrDA,IAAyCiB,EAAQF,KAAKlB,KACtD,IAAIqB,EAAKR,IAAkBO,EAAS,EAAI,GACpCE,EAAKT,IAAkBO,EAAS,EAAI,GACpCG,EAAKP,EAAqBK,EAAIC,GAAIhH,QAEtC,OADA6F,IAAqBkB,EAAS,EAALC,GAClBC,EAPX,QASIpB,IAAqC,QAnFjD,qBAEI,SAAcH,GACV,IAAMwB,EAAMC,OAAO/J,OAAOoB,EAAmB4I,WAG7C,OAFAF,EAAIxB,IAAMA,EAEHwB,IANf,uBA+BI,SAAiB1K,EAAG6K,GAChB,IAAIC,EAAOnB,EAAoB3J,EAAGqJ,KAC9B0B,EAAOrB,EACPsB,EAAM3B,IAAkCyB,EAAMC,EAAMF,GACxD,OAAO7I,EAAmBiJ,OAAOD,KAnCzC,mCAgDI,SAA6BhL,EAAG6K,GAC5B,IAAIC,EAAOnB,EAAoB3J,EAAGqJ,KAC9B0B,EAAOrB,EACPsB,EAAM3B,IAA8CyB,EAAMC,EAAMF,GACpE,OAAO7I,EAAmBiJ,OAAOD,OApDzC,KAwFaE,EAAmB,SAASC,EAAMC,GAC3C,MAAM,IAAIC,MAAMpC,EAAmBkC,EAAMC,O","file":"static/js/3.3ebd3fdf.chunk.js","sourcesContent":["import { csv } from \"d3\";\nimport create from \"zustand\";\nimport { NaiveMatrixProfile } from \"matrix-profile-wasm\";\nimport { sleep } from \"./utils\";\n\nexport enum DataState {\n  Empty,\n  SampleData,\n  CustomData,\n}\n\nexport enum CalcState {\n  Empty,\n  Loading,\n  Finished,\n}\n\nexport type TData = {\n  value: number;\n}[];\n\nexport const yValue = (o: TData[0]) => o.value;\n\nexport type TStore = {\n  data?: TData;\n  dataState: DataState;\n  calcState: CalcState;\n  matrixProfile?: NaiveMatrixProfile;\n  profile?: number[];\n  setData: (data: TData) => void;\n  loadSampleData: () => void;\n  calculate: () => void;\n};\n\nexport const useStore = create<TStore>((set, get) => ({\n  dataState: DataState.Empty,\n  calcState: CalcState.Empty,\n  setData: (data) => set({ data }),\n  loadSampleData: async () => {\n    const data = await csv(\"accident_UK.csv\", (row: any) => ({\n      value: +row[\"Total_Accident\"],\n    }));\n    set({ data, dataState: DataState.SampleData });\n  },\n  calculate: async () => {\n    set({ calcState: CalcState.Loading });\n    const data = get().data;\n    if (data === undefined) return;\n    await sleep(0.1);\n    const x = Float32Array.from(data.map(yValue));\n    const matrixProfile = NaiveMatrixProfile.calculate(x, 10);\n    const profile = Array.from(matrixProfile.get_profile());\n    set({ matrixProfile, profile, calcState: CalcState.Finished });\n  },\n}));\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const clamp = (x: number, min: number, max: number) => {\n  return x < min ? min : x > max ? max : x;\n};\n\nexport const sleep = (delay: number) => new Promise((resolve) => setTimeout(resolve, delay));","import React from \"react\";\nimport { DataState, TStore, useStore } from \"../store\";\n\nconst selector = ({ loadSampleData, dataState }: TStore) => ({\n  loadSampleData,\n  dataState,\n});\n\nexport const LoadSampleBtn: React.FC = () => {\n  const { loadSampleData, dataState } = useStore(selector);\n\n  return (\n    <button\n      className=\"btn\"\n      onClick={loadSampleData}\n      disabled={dataState === DataState.SampleData}\n    >\n      Load sample\n    </button>\n  );\n};\n","import { axisBottom, axisLeft, extent, line, scaleLinear, select } from \"d3\";\nimport React, { useCallback, useMemo } from \"react\";\nimport { Margins } from \"../types\";\n\ninterface Props {\n  y: number[];\n  height: number;\n  width: number;\n  margins: Margins;\n  limits: number[] | null;\n  title?: string;\n}\n\nexport const LinePlot: React.FC<Props> = ({\n  y,\n  margins,\n  height,\n  width,\n  children,\n  limits,\n  title,\n}) => {\n  // const innerHeight = height - margins.top - margins.bottom;\n  const innerWidth = width - margins.left - margins.right;\n\n  const { x, yShow } = useMemo(() => {\n    return limits === null\n      ? { x: [0, y.length], yShow: y }\n      : { x: [limits[0], limits[1]], yShow: y.slice(limits[0], limits[1]) };\n  }, [limits, y]);\n\n  const { xAxis, xScale } = useMemo(() => {\n    const domain = x;\n    const range = [margins.left, width - margins.right];\n    const xScale = scaleLinear().domain(domain).range(range);\n    const xAxis = axisBottom(xScale).tickSize(5).tickSizeOuter(0);\n    return { xAxis, xScale };\n  }, [margins.left, margins.right, width, x]);\n\n  const { yAxis, yScale } = useMemo(() => {\n    const domain = extent(y).map((o?: number) => o ?? 0);\n    const range = [height - margins.bottom, margins.top];\n    const yScale = scaleLinear().domain(domain).range(range).nice();\n    const yAxis = axisLeft(yScale).tickSize(-innerWidth).ticks(4);\n    return { yScale, yAxis };\n  }, [y, height, margins, innerWidth]);\n\n  const path = useMemo(() => {\n    if (yShow !== undefined) {\n      return line()(yShow.map((o, i) => [xScale(i+x[0]), yScale(o)]));\n    }\n    return null;\n  }, [yShow, xScale, yScale, x]);\n\n  const xAxisRef = useCallback(\n    (node) => {\n      select(node).call(xAxis);\n    },\n    [xAxis]\n  );\n\n  const yAxisRef = useCallback(\n    (node) => {\n      select(node).transition().call(yAxis);\n    },\n    [yAxis]\n  );\n\n  return (\n    <div className=\"bg-indigo-50 rounded-sm\">\n      <svg height={height} width={width}>\n        {title !== undefined ? (\n          <text\n            className=\"text-current text-2xl\"\n            transform={`translate(${margins.left + 5}, ${margins.top - 10})`}\n          >\n            {title}\n          </text>\n        ) : null}\n        <g\n          ref={xAxisRef}\n          transform={`translate(0,${height - margins.bottom})`}\n        />\n        <g ref={yAxisRef} transform={`translate(${margins.left},0)`} />\n        {path !== null ? (\n          <path\n            fill=\"none\"\n            className=\"stroke-current text-blue-900 stroke-2 text-opacity-80\"\n            d={path}\n          />\n        ) : null}\n        {children}\n      </svg>\n    </div>\n  );\n};\n","import { brushX } from \"d3-brush\";\nimport { ScaleLinear } from \"d3-scale\";\nimport { select } from \"d3-selection\";\nimport React, { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { Margins } from \"../types\";\nimport { LinePlot } from \"./LinePlot\";\n\ninterface Props {\n  y: number[];\n  profile?: number[];\n  width: number;\n  height: number;\n  margins: Margins;\n  xScale: ScaleLinear<number, number>;\n  limits: number[] | null;\n  setLimits: (x: number[] | null) => void;\n}\n\n// const initialLimit = 400;\n\nexport const Brush: React.FC<Props> = ({\n  y,\n  profile,\n  height,\n  width,\n  margins,\n  xScale,\n  limits,\n  setLimits,\n}) => {\n  const brushEnd = useCallback(\n    ({ selection, type }) => {\n      if (selection === null) {\n        setLimits(null);\n      } else if (type !== \"end\") {\n        setLimits(selection.map(xScale.invert));\n      }\n    },\n    [setLimits, xScale]\n  );\n\n  const brush = useMemo(() => {\n    const brush = brushX().extent([\n      [margins.left, margins.top],\n      [width - margins.right, height - margins.bottom],\n    ]);\n    brush.on(\"brush\", brushEnd);\n    brush.on(\"end\", brushEnd);\n    return brush;\n  }, [margins, width, height, brushEnd]);\n\n  const refTS = useRef<SVGGElement>(null);\n  const refMP = useRef<SVGGElement>(null);\n\n  useEffect(() => {\n    if (brush === undefined || refTS.current === null) return;\n    select(refTS.current).call(brush);\n    if (refMP.current !== null) select(refMP.current).call(brush);\n    // if (y.length > initialLimit) g.call(brush.move, [0, initialLimit].map(xScale));\n  }, [brush, xScale, y.length, profile]);\n\n  return (\n    <div>\n      <LinePlot\n        y={y}\n        margins={margins}\n        height={height}\n        width={width}\n        limits={null}\n      >\n        <g ref={refTS} />\n      </LinePlot>\n      {profile !== undefined ? (\n        <LinePlot\n          y={profile}\n          margins={margins}\n          height={height}\n          width={width}\n          limits={null}\n        >\n          <g ref={refMP} />\n        </LinePlot>\n      ) : null}\n    </div>\n  );\n};\n","import { scaleLinear } from \"d3\";\nimport React, { useMemo, useState } from \"react\";\nimport useMeasure from \"react-use-measure\";\nimport { TStore, useStore, yValue } from \"../store\";\nimport { clamp } from \"../utils\";\nimport { Brush } from \"./Brush\";\nimport { LinePlot } from \"./LinePlot\";\n\nconst selector = ({ data, profile }: TStore) => ({ data, profile });\n\nconst margins = {\n  left: 30,\n  right: 20,\n  top: 38,\n  bottom: 25,\n};\n\nconst brushMargins = {\n  ...margins,\n  top: 5,\n};\n\nconst plotLimits = { minHeight: 100, maxHeight: 180 };\nconst brushLimits = { minHeight: 50, maxHeight: 100 };\n\nexport const Plot = () => {\n  const [ref, { height, width }] = useMeasure({ polyfill: ResizeObserver });\n  const { data, profile } = useStore(selector);\n  const [limits, setLimits] = useState<number[] | null>(null);\n\n  const plotData = useMemo(() => data?.map(yValue), [data]);\n\n  const xScale = useMemo(() => {\n    const domain = [0, plotData?.length ?? 100];\n    const range = [margins.left, width - margins.right];\n    const xScale = scaleLinear().domain(domain).range(range);\n    return xScale;\n  }, [plotData, width]);\n\n  let dataHeight = profile === undefined ? height : height / 2;\n  dataHeight = clamp(dataHeight, plotLimits.minHeight, plotLimits.maxHeight);\n  const brushHeight = clamp(\n    height - dataHeight,\n    brushLimits.minHeight,\n    brushLimits.maxHeight\n  );\n\n  return (\n    <div\n      ref={ref}\n      style={{ minWidth: \"300px\" }}\n      className=\"mt-4 flex flex-col flex-1\"\n    >\n      {plotData !== undefined ? (\n        <LinePlot\n          y={plotData}\n          margins={margins}\n          height={dataHeight}\n          width={width}\n          limits={limits}\n          title=\"Time series data\"\n        />\n      ) : (\n        <div className=\"mt-5 text-center\">\n          <p>Upload some time series data or Load the sample data.</p>\n        </div>\n      )}\n      {profile !== undefined ? (\n        <div className=\"mt-2\">\n          <LinePlot\n            y={profile}\n            margins={margins}\n            height={dataHeight}\n            width={width}\n            limits={limits}\n            title=\"Matrix profile\"\n          />\n        </div>\n      ) : null}\n      {plotData !== undefined ? (\n        <div className=\"mt-2\">\n          <Brush\n            y={plotData}\n            profile={profile}\n            margins={brushMargins}\n            height={brushHeight}\n            width={width}\n            xScale={xScale}\n            limits={limits}\n            setLimits={setLimits}\n          />\n        </div>\n      ) : null}\n      {(profile === undefined) && (plotData !== undefined) ? (\n        <div className=\"mt-5 text-center\">\n          <p>Use the \"Calculate\" button to cumpute the matrix profile.</p>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { DataState, TStore, useStore } from \"../store\";\n\nconst selector = (props: TStore) => props.dataState;\n\nexport const DataDescription: React.FC = () => {\n  const dataState = useStore(selector);\n\n  return dataState === DataState.SampleData ? (\n    <div className=\"mt-2 text-base text-gray-700\">\n      <p>\n        Data:{\" \"}\n        <a\n          href=\"https://www.kaggle.com/sadeghjalalian/road-accident-in-uk\"\n          target=\"_black\"\n          rel=\"noopener\"\n        >\n          Road Accident in UK\n        </a>\n      </p>\n      <p className=\"font-light\">\n        This data provides detailed road safety data about the circumstances of\n        personal injury road accidents in GB from 2014 to 2017. The statistics\n        relate only to personal injury accidents on public roads that are\n        reported to the police, and subsequently recorded, using the STATS19\n        accident reporting form.\n      </p>\n    </div>\n  ) : null;\n};\n","import React from \"react\";\n\nconst sizes = {\n  \"sm\": 3, \"md\": 4, \"lg\": 5\n}\n\ninterface Props {\n  className?: string;\n  size?: keyof typeof sizes;\n}\n\nexport const Spinner: React.FC<Props> = ({ className, size=\"md\" }) => {\n  const sz = sizes[size];\n  const sizeCls = `h-${sz} w-${sz}`;\n\n  return (\n    <svg className={`animate-spin ${sizeCls} ${className}`} fill=\"none\" viewBox=\"0 0 24 24\">\n      <circle\n        className=\"opacity-25\"\n        cx=\"12\"\n        cy=\"12\"\n        r=\"10\"\n        stroke=\"currentColor\"\n        strokeWidth=\"4\"\n      ></circle>\n      <path\n        className=\"opacity-75\"\n        fill=\"currentColor\"\n        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n      ></path>\n    </svg>\n  );\n};\n","import React from \"react\";\nimport { CalcState, DataState, TStore, useStore } from \"../store\";\nimport { Spinner } from \"./Spinner\";\n\nconst selector = ({ dataState, calcState, calculate }: TStore) => ({\n  dataState,\n  calcState,\n  calculate,\n});\n\nexport const CalculateBtn: React.FC = () => {\n  const { dataState, calcState, calculate } = useStore(selector);\n\n  return (\n    <div>\n      <button\n        className=\"btn\"\n        onClick={async () => {\n          // const sleep = () => new Promise(() => calculate());\n          calculate();\n          // sleep();\n        }}\n        disabled={\n          dataState === DataState.Empty || calcState !== CalcState.Empty\n        }\n      >\n        <div className=\"flex items-baseline\">\n          Calculate\n          {calcState === CalcState.Loading ? (\n            <Spinner className=\"ml-1\" />\n          ) : null}\n        </div>\n      </button>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { LoadSampleBtn } from \"./components/LoadSampleBtn\";\nimport { Plot } from \"./components/Plot\";\nimport { DataDescription } from \"./components/DataDescription\";\nimport { CalculateBtn } from \"./components/CalculateBtn\";\n\nexport const App = () => {\n  return (\n    <div className=\"flex flex-col container mx-auto px-10 pt-6 min-h-screen\">\n      <p className=\"text-5xl font-bold\">Matrix Profile</p>\n      <div className=\"mt-14 pr-4 flex space-x-2 justify-end\">\n        {/* <p>upload data button</p> */}\n        {/* <p>info for uploading</p> */}\n        <LoadSampleBtn />\n        <CalculateBtn />\n      </div>\n      <DataDescription />\n      <Plot />\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { App } from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import * as wasm from './matrix_profile_wasm_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nlet cachegetFloat32Memory0 = null;\nfunction getFloat32Memory0() {\n    if (cachegetFloat32Memory0 === null || cachegetFloat32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetFloat32Memory0 = new Float32Array(wasm.memory.buffer);\n    }\n    return cachegetFloat32Memory0;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction passArrayF32ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 4);\n    getFloat32Memory0().set(arg, ptr / 4);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction getArrayF32FromWasm0(ptr, len) {\n    return getFloat32Memory0().subarray(ptr / 4, ptr / 4 + len);\n}\n\nlet cachegetUint32Memory0 = null;\nfunction getUint32Memory0() {\n    if (cachegetUint32Memory0 === null || cachegetUint32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint32Memory0 = new Uint32Array(wasm.memory.buffer);\n    }\n    return cachegetUint32Memory0;\n}\n\nfunction getArrayU32FromWasm0(ptr, len) {\n    return getUint32Memory0().subarray(ptr / 4, ptr / 4 + len);\n}\n/**\n*/\nexport class NaiveMatrixProfile {\n\n    static __wrap(ptr) {\n        const obj = Object.create(NaiveMatrixProfile.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_naivematrixprofile_free(ptr);\n    }\n    /**\n    * Computes the matrix profile using a naive (brute force) algorithm.\n    *\n    * # Arguments\n    *\n    * * `x` - Time series data\n    * * `m` - Window size\n    * @param {Float32Array} x\n    * @param {number} m\n    * @returns {NaiveMatrixProfile}\n    */\n    static calculate(x, m) {\n        var ptr0 = passArrayF32ToWasm0(x, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        var ret = wasm.naivematrixprofile_calculate(ptr0, len0, m);\n        return NaiveMatrixProfile.__wrap(ret);\n    }\n    /**\n    * Computes the matrix profile using a naive (brute force) algorithm.\n    *\n    * # Arguments\n    *\n    * * `x` - Time series data\n    * * `m` - Window size\n    * @param {Float32Array} x\n    * @param {number} m\n    * @returns {NaiveMatrixProfile}\n    */\n    static calculate_full_matrix(x, m) {\n        var ptr0 = passArrayF32ToWasm0(x, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        var ret = wasm.naivematrixprofile_calculate_full_matrix(ptr0, len0, m);\n        return NaiveMatrixProfile.__wrap(ret);\n    }\n    /**\n    * @returns {Float32Array}\n    */\n    get_profile() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.naivematrixprofile_get_profile(retptr, this.ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayF32FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4);\n            return v0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint32Array}\n    */\n    get_profile_idxs() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.naivematrixprofile_get_profile_idxs(retptr, this.ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayU32FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4);\n            return v0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n}\n\nexport const __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n"],"sourceRoot":""}