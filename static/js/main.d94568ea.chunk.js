(this["webpackJsonpmatrix-profile-web"]=this["webpackJsonpmatrix-profile-web"]||[]).push([[0],{182:function(t,e,n){},183:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(59),i=n.n(r),l=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,188)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))},s=n(6),o=n.n(s),u=n(37),d=n(2),b=n(65),j=n(61);var f,m,h=Object(j.a)(new function(){return new Worker(n.p+"static/js/wasm.worker.6b4c3841.worker.js")});!function(t){t[t.Empty=0]="Empty",t[t.SampleData=1]="SampleData",t[t.CustomData=2]="CustomData"}(f||(f={})),function(t){t[t.Empty=0]="Empty",t[t.Loading=1]="Loading",t[t.Finished=2]="Finished"}(m||(m={}));var x=function(t){return t.value},p=Object(b.a)((function(t,e){return{windowSize:50,dataState:f.Empty,calcState:m.Empty,setData:function(e){return t({data:e})},loadSampleData:function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)("accident_UK.csv",(function(t){return{value:+t.Total_Accident}}));case 2:n=e.sent,t({data:n,dataState:f.SampleData});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),calculate:function(){var n=Object(u.a)(o.a.mark((function n(){var a,c,r,i,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t({calcState:m.Loading}),void 0!==(a=e().data)){n.next=4;break}return n.abrupt("return");case 4:return c=Float32Array.from(a.map(x)),n.next=7,h.calculate(c,e().windowSize);case 7:r=n.sent,i=r.profileIdxs,l=r.profile,t({profileIdxs:i,profile:l,calcState:m.Finished});case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}})),O=n(0),v=function(t){return{loadSampleData:t.loadSampleData,dataState:t.dataState}},g=function(){var t=p(v),e=t.loadSampleData,n=t.dataState;return Object(O.jsx)("button",{className:"btn",onClick:e,disabled:n===f.SampleData,children:"Load sample"})},w=n(4),S=n(38),y=n(66),k=function(t,e,n){return t<e?e:t>n?n:t},N=n(29),C=n(57),M=Object(a.forwardRef)((function(t,e){var n=t.y,c=t.yLength,r=t.margins,i=t.height,l=t.width,s=t.children,o=t.limits,u=t.title,b=t.className,j=t.refB,f=t.windowSize,m=t.windowSizeB,h=t.brushClassName,x=t.showYAxis,p=void 0===x||x,v=t.cursorBrush,g=void 0!==v&&v,w=i-r.top-r.bottom,S=l-r.left-r.right,y=Object(a.useMemo)((function(){return null===o?{x:[0,null!==c&&void 0!==c?c:n.length],yShow:n}:{x:[o[0],o[1]],yShow:n.slice(o[0],o[1])}}),[o,n,c]),k=y.x,N=y.yShow,C=Object(a.useMemo)((function(){var t=k,e=[r.left,l-r.right],n=Object(d.f)().domain(t).range(e);return{xAxis:Object(d.a)(n).tickSize(5).tickSizeOuter(0),xScale:n}}),[r.left,r.right,l,k]),M=C.xAxis,z=C.xScale,A=Object(a.useMemo)((function(){var t=Object(d.d)(n).map((function(t){return null!==t&&void 0!==t?t:0})),e=[i-r.bottom,r.top],a=Object(d.f)().domain(t).range(e).nice();return{yScale:a,yAxis:Object(d.b)(a).tickSize(-S).ticks(4)}}),[n,i,r,S]),B=A.yAxis,D=A.yScale,L=Object(a.useMemo)((function(){return void 0!==N?Object(d.e)()(N.map((function(t,e){return[z(e+k[0]),D(t)]}))):null}),[N,z,D,k]),E=Object(a.useCallback)((function(t){Object(d.g)(t).call(M)}),[M]),F=Object(a.useCallback)((function(t){p&&Object(d.g)(t).transition().call(B)}),[p,B]),R=Object(a.useMemo)((function(){return Math.abs(z(0)-z(null!==f&&void 0!==f?f:0))}),[f,z]),T=Object(a.useMemo)((function(){return Math.abs(z(0)-z(null!==m&&void 0!==m?m:0))}),[m,z]),P=Object(a.useCallback)((function(t){var n=t.clientX,a=t.target,c=e;if(null!==c.current){var r=a.getBoundingClientRect(),i=r.x,l=r.width,s=n-i,o=Math.min(l-s,R);if(c.current.setAttribute("x",""+s),c.current.setAttribute("width",""+o),void 0!==j&&null!==j.current){var u=Math.min(l-s,T);j.current.setAttribute("x",""+s),j.current.setAttribute("width",""+u)}}}),[e,j,R,T]),I=Object(a.useCallback)((function(){var t=e;null!==t.current&&(t.current.setAttribute("width","0"),void 0!==j&&null!==j.current&&j.current.setAttribute("width","0"))}),[e,j]);return Object(O.jsx)("div",{className:"bg-indigo-50 rounded-sm",children:Object(O.jsxs)("svg",{height:i,width:l,children:[Object(O.jsx)("rect",{className:"fill-current text-white",transform:"translate(".concat(r.left,",").concat(r.top,")"),width:S,height:w}),void 0!==u?Object(O.jsx)("text",{className:"text-current text-2xl",transform:"translate(".concat(r.left+5,", ").concat(r.top-10,")"),children:u}):null,Object(O.jsx)("g",{ref:E,transform:"translate(0,".concat(i-r.bottom,")")}),Object(O.jsx)("g",{ref:F,transform:"translate(".concat(r.left,",0)")}),null!==L?Object(O.jsx)("path",{fill:"none",className:b,d:L}):null,s,g?Object(O.jsxs)("g",{transform:"translate(".concat(r.left,",").concat(r.top,")"),children:[Object(O.jsx)("rect",{ref:e,className:h,height:w}),Object(O.jsx)("rect",{className:"opacity-0",width:S,height:w,onPointerMove:P,onPointerLeave:I})]}):null]})})})),z=function(t){var e=t.y,n=t.profile,c=t.height,r=t.width,i=t.margins,l=t.setLimits,s=Object(a.useMemo)((function(){var t=[0,e.length],n=[i.left,r-i.right];return Object(d.f)().domain(t).range(n)}),[e.length,i.left,i.right,r]),o=Object(a.useCallback)((function(t){var e=t.selection,n=t.type;null===e?l(null):"end"!==n&&l(e.map(s.invert))}),[l,s]),u=Object(a.useMemo)((function(){var t=Object(N.a)().extent([[i.left,i.top],[r-i.right,c-i.bottom]]);return t.on("brush",o),t.on("end",o),t}),[i,r,c,o]),b=Object(a.useRef)(null),j=Object(a.useRef)(null),f=Object(a.useMemo)((function(){var t=Object(d.d)(null!==n&&void 0!==n?n:[0,100]).map((function(t){return null!==t&&void 0!==t?t:0})),e=[c-i.bottom,i.top];return Object(d.f)().domain(t).range(e).nice()}),[c,i,n]),m=Object(a.useMemo)((function(){return void 0!==n?Object(d.e)()(n.map((function(t,e){return[s(e),f(t)]}))):null}),[n,s,f]);return Object(a.useEffect)((function(){void 0!==u&&null!==b.current&&(Object(C.a)(b.current).call(u),null!==j.current&&Object(C.a)(j.current).call(u))}),[u,s,e.length,n]),Object(O.jsx)("div",{children:Object(O.jsxs)(M,{y:e,margins:i,height:c,width:r,limits:null,className:"stroke-current text-blue-900 stroke-2 text-opacity-80",showYAxis:!1,children:[null!==m?Object(O.jsx)("path",{fill:"none",className:"stroke-current text-red-900 stroke-2 text-opacity-80",d:m}):null,Object(O.jsx)("g",{ref:b})]})})},A=function(t){return{data:t.data,profile:t.profile,windowSize:t.windowSize}},B={left:30,right:20,top:38,bottom:25},D=Object(S.a)(Object(S.a)({},B),{},{top:10}),L=100,E=200,F=50,R=120,T=function(){var t=Object(y.a)({polyfill:ResizeObserver}),e=Object(w.a)(t,2),n=e[0],c=e[1],r=c.height,i=c.width,l=p(A),s=l.data,o=l.profile,u=l.windowSize,d=Object(a.useState)(null),b=Object(w.a)(d,2),j=b[0],f=b[1],m=Object(a.useMemo)((function(){return null===s||void 0===s?void 0:s.map(x)}),[s]),h=void 0===o?r:r/2;h=k(h,L,E);var v=k(r-h,F,R),g=Object(a.useRef)(null),S=Object(a.useRef)(null);return Object(O.jsxs)("div",{ref:n,style:{minWidth:"300px"},className:"mt-4 flex flex-col flex-1",children:[void 0!==m?Object(O.jsx)(M,{ref:g,refB:S,y:m,margins:B,height:h,width:i,limits:j,title:"Time series data",className:"stroke-current text-blue-900 stroke-2 text-opacity-80",cursorBrush:!0,brushClassName:"fill-current text-blue-400 opacity-30",windowSize:u,windowSizeB:1}):Object(O.jsx)("div",{className:"mt-5 text-center",children:Object(O.jsx)("p",{children:"Upload some time series data or Load the sample data."})}),void 0!==o?Object(O.jsx)("div",{className:"mt-2",children:Object(O.jsx)(M,{ref:S,refB:g,y:o,yLength:null===m||void 0===m?void 0:m.length,margins:B,height:h,width:i,limits:j,title:"Matrix profile",className:"stroke-current text-red-900 stroke-2 text-opacity-80",cursorBrush:!0,brushClassName:"fill-current text-red-600 opacity-60 stroke-current stroke-1",windowSize:1,windowSizeB:u})}):null,void 0!==m?Object(O.jsx)("div",{className:"mt-2",children:Object(O.jsx)(z,{y:m,profile:o,margins:D,height:v,width:i,setLimits:f})}):null,void 0===o&&void 0!==m?Object(O.jsx)("div",{className:"mt-5 text-center",children:Object(O.jsx)("p",{children:'Use the "Calculate" button to cumpute the matrix profile.'})}):null]})},P=function(t){return t.dataState},I=function(){return p(P)===f.SampleData?Object(O.jsxs)("div",{className:"mt-2 text-base text-gray-700",children:[Object(O.jsxs)("p",{children:["Data:"," ",Object(O.jsx)("a",{href:"https://www.kaggle.com/sadeghjalalian/road-accident-in-uk",target:"_black",rel:"noopener",children:"Road Accident in UK"})]}),Object(O.jsx)("p",{className:"font-light",children:"This data provides detailed road safety data about the circumstances of personal injury road accidents in GB from 2014 to 2017. The statistics relate only to personal injury accidents on public roads that are reported to the police, and subsequently recorded, using the STATS19 accident reporting form."})]}):null},U={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},W=function(t){var e=t.className,n=t.size,a=U[void 0===n?"md":n];return Object(O.jsxs)("svg",{className:"animate-spin ".concat(a," ").concat(e),fill:"none",viewBox:"0 0 24 24",children:[Object(O.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(O.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},_=function(t){return{dataState:t.dataState,calcState:t.calcState,calculate:t.calculate}},J=function(){var t=p(_),e=t.dataState,n=t.calcState,a=t.calculate;return Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"btn",onClick:a,disabled:e===f.Empty||n!==m.Empty,children:Object(O.jsxs)("div",{className:"flex items-baseline",children:["Calculate",n===m.Loading?Object(O.jsx)(W,{className:"ml-1"}):null]})})})},K=function(){return Object(O.jsxs)("div",{className:"flex flex-col container mx-auto px-10 pt-6 min-h-screen",children:[Object(O.jsx)("p",{className:"text-5xl font-bold",children:"Matrix Profile"}),Object(O.jsxs)("div",{className:"mt-14 pr-4 flex space-x-2 justify-end",children:[Object(O.jsx)(g,{}),Object(O.jsx)(J,{})]}),Object(O.jsx)(I,{}),Object(O.jsx)(T,{})]})};n(182);i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(K,{})}),document.getElementById("root")),l()}},[[183,1,2]]]);
//# sourceMappingURL=main.d94568ea.chunk.js.map